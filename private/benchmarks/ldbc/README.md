Neo4j Data Importer & Workload Runner for LDBC Social Network Benchmark
---------------------

This is a reference implementation of the LDBC Social Network benchmark, for the [Neo4j](http://www.neo4j.org/) graph database.
It contains code for the following:

1. Importing datasets generated by the [LDBC Social Network Data Generator](https://github.com/ldbc/ldbc_snb_datagen) into Neo4j
2. Running workloads from the [LDBC Social Network Workload Definition](https://github.com/ldbc/ldbc_snb_docs) against Neo4j

**Build**

	git clone git@github.com:neo-technology/ldbc.git
	cd ldbc
	git submodule init
	git submodule update
	mvn clean package -DskipTests -PfullBenchmarks

This produces an uberjar here: `neo4j-connectors/target/ldbc.jar`. 

Available Commands
--------------

        $ java -jar neo4j-connectors/target/ldbc.jar help
        usage: ldbc <command> [<args>]
        
        The most commonly used ldbc commands are:
            help            Display help information
            import          Imports LDBC CSV file into Neo4j
            index           (Re)indexes a Neo4j store with the necessary indexes for LDBC benchmark
            inspect         Reports which LDBC schema variant is in the store
            run             Executes an LDBC workload against a Neo4j store
            run-export      Runs workload multiple times, in forked JVMs, by delegating to 'run' command
            upgrade-store
        
        See 'ldbc help <command>' for more information on a specific command.

	
Run Example (SF100 / read-only / Core API)
--------------

        $ java -jar neo4j-connectors/target/ldbc.jar help run
        NAME
                ldbc run - Executes an LDBC workload against a Neo4j store
        
        SYNOPSIS
                ldbc run [--db <Database Directory>] --ldbc-config <LDBC Config>
                        [--neo4j-api <Neo4j API>] [--neo4j-config <Neo4j Config>]
                        [--planner <Cypher Planner>] [--read-threads <Read thread count>]
                        [--reads <Read Parameters>] [--results <Results directory>]
                        [--run-count <Run operation count>]
                        [--runtime <Cypher Runtime: DEFAULT, INTERPRETED, SLOTTED>]
                        [--wait-for-file <Wait on file>]
                        [--warmup-count <Warmup operation count>] [--writes <Write Parameters>]
        
        OPTIONS
                --db <Database Directory>
                    Target Neo4j database directory - see:
                    s3://quality.neotechnology.com/ldbc/db/
        
                --ldbc-config <LDBC Config>
                    LDBC driver configuration file - see:
                    neo4j-connectors/src/main/resources/ldbc/
        
                --neo4j-api <Neo4j API>
                    Neo4j surface API: EMBEDDED_CORE, EMBEDDED_CYPHER, REMOTE_CYPHER
        
                --neo4j-config <Neo4j Config>
                    Neo4j configuration file - see:
                    neo4j-connectors/src/main/resources/neo4j/
        
                --planner <Cypher Planner>
                    Cypher Planner: DEFAULT, RULE, COST
        
                --read-threads <Read thread count>
                    Number of threads for executing read queries (write thread count is
                    function of dataset)
        
                --reads <Read Parameters>
                    Read query parameters directory - see:
                    s3://quality.neotechnology.com/ldbc/csv/
        
                --results <Results directory>
                    Benchmark results directory (will be created if does not exist)
        
                --run-count <Run operation count>
                    Number of operations to run during measurement phase
        
                --runtime <Cypher Runtime: DEFAULT, INTERPRETED, SLOTTED>
                    Cypher Runtime
        
                --wait-for-file <Wait on file>
                    If set, process will not exit until it finds this file
        
                --warmup-count <Warmup operation count>
                    Number of operations to run during warmup phase
        
                --writes <Write Parameters>
                    Write query parameters directory - see:
                    s3://quality.neotechnology.com/ldbc/csv/
            
The workload is run using the [LDBC_load generator](https://github.com/ldbc/ldbc_snb_driver). 


Dataset Statistics
--------------

| Statistic                                 | SF10 (17 GB)  | SF100 (158 GB)  |
| ------------------------------------------|--------------:| ---------------:|
| Nodes                                     | 29,000,621    | 271,824,400      |
| Relationships                             | 167,364,926   | 1,675,304,650    |
| (:Comment)                                | 20,859,696    | 209,609,549     |
| (:Post)                                   | 7,442,639     | 57,590,412      |
| (:Forum)                                  | 606,567       | 4,146,576       |
| (:Tag)                                    | 16,080        | 16,080          |
| (:TagClass)                               | 71            | 71              |
| (:Person)                                 | 66,111        | 452,256         |
| (:Company)                                | 1,574         | 1,574           |
| (:University)                             | 6,420         | 6,420           |
| (:City)(:Place)                           | 1,348         | 1,348           |
| (:Country)(:Place)                        | 110           | 110             |
| (:Continent)(:Place)                      | 5             | 5               |
| (:Company)-[:IS_LOCATED_IN]->(:Country)   | 1,574         | 1,574           |
| (:University)-[:IS_LOCATED_IN]->(:City)   | 6,420         | 6,420           |
| (:Person)-[:LIKES]->(:Comment)            | 16,662,505    | 208,010,632     |
| (:Place)-[:IS_PART_OF]->(:Place)          | 1,460         | 1,460           |
| (:Comment)-[:HAS_CREATOR]->(:Person)      | 20,859,696    | 209,609,549     |
| (:Forum)-[:CONTAINER_OF]->(:Post)         | 7,442,639     | 57,590,412      |
| (:Person)-[:LIKES]->(:Post)               | 7,917,273     | 90,074,505      |
| (:TagClass)-[IS_SUBCLASS_OF]->(:TagClass) | 70            | 70              |
| (:Comment)-[HAS_TAG]->(:Tag)              | 27,277,297    | 275,399,104     |
| (:Forum)-[HAS_MEMBER]->(:Person)          | 16,934,143    | 176,923,488     |
| (:Post)-[HAS_CREATOR]->(:Person)          | 7,442,640     | 57,590,412      |
| (:Tag)-[HAS_TYPE]->(:TagClass)            | 16,081        | 16,080          |
| (:Comment)-[:IS_LOCATED_IN]->(:Country)   | 20,859,697    | 209,609,549     |
| (:Forum)-[HAS_MODERATOR]->(:Person)       | 606,568       | 4,146,576       |
| (:Person)-[:HAS_INTEREST]->(:Tag)         | 1,547,905     | 10,570,860      |
| (:Person)-[STUDY_AT]->(:University)       | 52,927        | 362,188         |
| (:Post)-[:HAS_TAG]->(:Tag)                | 7,265,126     | 73,373,091      |
| (:Comment)-[:REPLY_OF]->(:Comment)        | 10,580,543    | 106,319,852     |
| (:Forum)-[:HAS_TAG]->(:Tag)               | 2,088,361     | 14,265,180      |
| (:Person)-[:IS_LOCATED_IN]->(:City)       | 66,111        | 452,256         |
| (:Person)-[WORK_AT]->(:Company)           | 145,272       | 989,802         |
| (:Post)-[IS_LOCATED_IN]->(:Country)       | 7,442,639     | 57,590,412      |
| (:Comment)-[:REPLY_OF]->(:Post)           | 10,279,153    | 103,289,697     |
| (:Person)-[:KNOWS]->(:Person)             | 1,868,826     | 19,111,489      |

